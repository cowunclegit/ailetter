# Implementation Plan: Single Draft Constraint and Dashboard Pre-check

**Branch**: `007-single-draft-precheck` | **Date**: 2026-01-13 | **Spec**: [specs/007-single-draft-precheck/spec.md](spec.md)
**Input**: Feature specification from `/specs/007-single-draft-precheck/spec.md`

## Summary
Enforce a single active newsletter draft constraint. Clicking "Create Draft" will now replace any existing draft without confirmation. The curator dashboard will automatically detect this draft upon loading, pre-check the associated trend items, and provide real-time synchronization between checkbox toggles and the draft's contents.

## Technical Context

**Language/Version**: Node.js (Backend), React.js (Frontend)
**Primary Dependencies**: Express, Axios, MUI
**Storage**: SQLite3
**Testing**: Jest (Unit & Integration)
**Target Platform**: Web Browser
**Project Type**: Web application
**Performance Goals**: Dashboard detection < 500ms; Sync completion < 300ms
**Constraints**: Single draft status enforcement; Immediate database sync for toggles.

## Constitution Check

*GATE: Must pass before Phase 0 research. Re-check after Phase 1 design.*

- [x] **I. Tech Stack**: Uses React.js and Node.js.
- [x] **II. TDD**: Mandatory. Tests for single draft logic and sync endpoints will be written first.

## Project Structure

### Documentation (this feature)

```text
specs/007-single-draft-precheck/
├── plan.md              # This file
├── research.md          # Phase 0 output
├── data-model.md        # Phase 1 output
├── quickstart.md        # Phase 1 output
├── contracts/           # Phase 1 output
└── tasks.md             # Phase 2 output (generated by /speckit.tasks)
```

### Source Code (repository root)

```text
backend/
├── src/
│   ├── api/
│   │   └── newsletters.js    # Add active draft detection and sync toggle endpoints
│   ├── models/
│   │   └── newsletterModel.js # Implement overwrite logic and item toggling
│   └── services/
└── tests/
    ├── api/
    └── unit/

frontend/
├── src/
│   ├── pages/
│   │   └── Dashboard.jsx    # Detection logic and real-time sync implementation
└── tests/
```

**Structure Decision**: Web application structure (Option 2) is maintained.